[{"path":"https://ropengov.github.io/dkstat/index.html","id":"dkstat-","dir":"","previous_headings":"","what":"API connection to the StatBank from Statistics Denmark.","title":"API connection to the StatBank from Statistics Denmark.","text":"package connects StatBank API Statistics Denmark. package early BETA new changes likely backward compatibility.","code":""},{"path":"https://ropengov.github.io/dkstat/index.html","id":"a-short-message-in-danish","dir":"","previous_headings":"","what":"A short message in Danish","title":"API connection to the StatBank from Statistics Denmark.","text":"Denne R Statistics pakke indeholder funktioner til give dig adgang til data gennem API’en fra Danmarks Statistik. Funktionerne henter data fra Statistikbanken og retunerer data.frame objekter med værdierne du spørger efter dit funktionskald.","code":""},{"path":"https://ropengov.github.io/dkstat/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"API connection to the StatBank from Statistics Denmark.","text":"can install development version github, using Hadley Wickham’s devtools package:","code":"if(!require(\"devtools\")) install.packages(\"devtools\") library(\"devtools\") install_github(\"rOpenGov/dkstat\")"},{"path":"https://ropengov.github.io/dkstat/index.html","id":"examples","dir":"","previous_headings":"","what":"Examples","title":"API connection to the StatBank from Statistics Denmark.","text":"default language danish, got lang parameter can change “da” “en” wan’t data returned English.","code":""},{"path":"https://ropengov.github.io/dkstat/index.html","id":"four-basic-function","dir":"","previous_headings":"Examples","what":"Four basic function","title":"API connection to the StatBank from Statistics Denmark.","text":"four basic functions learn: dst_search() function makes possible search different tables word phrase. dst_tables() function downloads possible tables available. dst_meta() function lets download meta data specific table, can see description, unit, variables values can download data . dst_get_data() lets download actual data wan’t. simple examples go basics requesting data StatBank structure output. First, ’ll load package:","code":"library(dkstat)"},{"path":"https://ropengov.github.io/dkstat/index.html","id":"the-search-function","dir":"","previous_headings":"","what":"The search function","title":"API connection to the StatBank from Statistics Denmark.","text":"search function let’s .. OK, might know already. search gdp text field tables.","code":"dst_search(string = \"bnp\", field = \"text\") ##         id ## 396 CFABNP ## 901   NAN1 ## 905  NAHL2 ## 906  NAHO2 ## 907 NAHD21 ## 955   NKN1 ## 959  NKHO2 ## 973   NRHP ##                                                                  text ## 396                                        FoU udgifter i pct. af BNP ## 901 Forsyningsbalance, Bruttonationalprodukt (BNP), beskæftigelse mv. ## 905         1-2.1.1 Produktion, BNP og indkomstdannelse (hovedposter) ## 906            1-2.1.1 Produktion, BNP og indkomstdannelse (oversigt) ## 907                                  1 Produktion og BNP (detaljeret) ## 955 Forsyningsbalance, Bruttonationalprodukt (BNP), beskæftigelse mv. ## 959                       1-2.1.1 Produktion, BNP og indkomstdannelse ## 973                       1-2.1.1 Produktion, BNP og indkomstdannelse ##                                       unit             updated firstPeriod ## 396 Procent af bruttonationalprodukt (BNP) 2015-01-30T09:00:00        1997 ## 901                                      - 2015-06-30T09:00:00        1966 ## 905                               Mio. kr. 2015-06-30T09:00:00        1966 ## 906                               Mio. kr. 2015-06-30T09:00:00        1995 ## 907                               Mio. kr. 2014-11-06T09:00:00        1995 ## 955                                      - 2015-08-31T09:00:00      1990K1 ## 959                               Mio. kr. 2015-08-31T09:00:00      1990K1 ## 973                                      - 2014-12-16T09:00:00        1993 ##     latestPeriod active                                     variables ## 396         2013   TRUE                               pct af BNP, tid ## 901         2014   TRUE                   transaktion, prisenhed, tid ## 905         2014   TRUE                   transaktion, prisenhed, tid ## 906         2014   TRUE                   transaktion, prisenhed, tid ## 907         2013   TRUE                   transaktion, prisenhed, tid ## 955       2015K2   TRUE transaktion, prisenhed, sæsonkorrigering, tid ## 959       2015K2   TRUE transaktion, prisenhed, sæsonkorrigering, tid ## 973         2013   TRUE           område, transaktion, prisenhed, tid"},{"path":"https://ropengov.github.io/dkstat/index.html","id":"download-the-tables","dir":"","previous_headings":"","what":"Download the tables","title":"API connection to the StatBank from Statistics Denmark.","text":"dst_get_tables function downloads available tables search function use searching word phrase.","code":"head(dst_get_tables(lang = \"da\")) ##      id                                                   text  unit ## 1 FOLK1                            Folketal den 1. i kvartalet Antal ## 2 FOLK2                                     Folketal 1. januar Antal ## 3 FOLK3                                     Folketal 1. januar Antal ## 4    FT           Folketal (summariske tal fra folketællinger) Antal ## 5 BEF5F Personer født på Færøerne og bosat i Danmark 1. januar Antal ## 6 BEF5G  Personer født i Grønland og bosat i Danmark 1. januar Antal ##               updated firstPeriod latestPeriod active ## 1 2015-08-11T09:00:00      2008K1       2015K3   TRUE ## 2 2015-02-10T09:00:00        1980         2015   TRUE ## 3 2015-02-10T09:00:00        2008         2015   TRUE ## 4 2015-02-10T09:00:00        1769         2015   TRUE ## 5 2015-02-10T09:00:00        2008         2015   TRUE ## 6 2015-02-10T09:00:00        2008         2015   TRUE ##                                                                  variables ## 1 område,køn,alder,civilstand,herkomst,oprindelsesland,statsborgerskab,tid ## 2                   alder,køn,herkomst,statsborgerskab,oprindelsesland,tid ## 3                                    fødselsdag,fødselsmåned,fødselsår,tid ## 4                                                       hovedlandsdele,tid ## 5                                       køn,alder,forældrenes fødested,tid ## 6                                       køn,alder,forældrenes fødested,tid"},{"path":"https://ropengov.github.io/dkstat/index.html","id":"meta-data","dir":"","previous_headings":"","what":"Meta data","title":"API connection to the StatBank from Statistics Denmark.","text":"dst_meta function retrieves meta data table wan’t take closer look . can used create final request, can figure structure query can define . ’ll get meta data AULAAR table. AULAAR table net unemployment numbers. ‘dst_meta’ function returns list 4 objects: - basics - variables - values - basic_query","code":"aulaar_meta <- dst_meta(table = \"AULAAR\", lang = \"da\")"},{"path":"https://ropengov.github.io/dkstat/index.html","id":"basics","dir":"","previous_headings":"Meta data","what":"Basics","title":"API connection to the StatBank from Statistics Denmark.","text":"Let’s see basics contains: ’s table id, short description, unit description table updated.","code":"aulaar_meta$basics ## $id ## [1] \"AULAAR\" ##  ## $text ## [1] \"Fuldtidsledige (netto)\" ##  ## $description ## [1] \"Fuldtidsledige (netto) efter køn, personer/pct. og tid\" ##  ## $unit ## [1] \"Antal\" ##  ## $updated ## [1] \"2015-06-19T09:00:00\""},{"path":"https://ropengov.github.io/dkstat/index.html","id":"variables","dir":"","previous_headings":"Meta data","what":"Variables","title":"API connection to the StatBank from Statistics Denmark.","text":"variables list short description variable well id. might want make sure supplied ID’s elimination columns equal FALSE. IDs eliminnation equal FALSE mandatory.","code":"aulaar_meta$variables ##       id          text elimination ## 1    KØN           køn        TRUE ## 2 PERPCT personer/pct.       FALSE ## 3    Tid           tid       FALSE"},{"path":"https://ropengov.github.io/dkstat/index.html","id":"values","dir":"","previous_headings":"Meta data","what":"Values","title":"API connection to the StatBank from Statistics Denmark.","text":"values list object values variable. use text column construct final query:","code":"str(aulaar_meta$values) ## List of 3 ##  $ KØN   :'data.frame':  3 obs. of  2 variables: ##   ..$ id  : chr [1:3] \"TOT\" \"M\" \"K\" ##   ..$ text: chr [1:3] \"I alt\" \"Mænd\" \"Kvinder\" ##  $ PERPCT:'data.frame':  2 obs. of  2 variables: ##   ..$ id  : chr [1:2] \"L10\" \"L9\" ##   ..$ text: chr [1:2] \"Procent af arbejdsstyrken\" \"Ledige (1000 personer)\" ##  $ Tid   :'data.frame':  36 obs. of  2 variables: ##   ..$ id  : chr [1:36] \"1979\" \"1980\" \"1981\" \"1982\" ... ##   ..$ text: chr [1:36] \"1979\" \"1980\" \"1981\" \"1982\" ..."},{"path":"https://ropengov.github.io/dkstat/index.html","id":"get-data","dir":"","previous_headings":"","what":"Get data","title":"API connection to the StatBank from Statistics Denmark.","text":"need build query based text column variable contains meta_data$values list. request don’t supply meta_data dst_get_data function, possible show . ’s good idea supply meta data dst_get_data function query table . don’t supply meta data dst_get_data function request meta data table ineffecient. Let’s query statbank using one value variable. can also build query beforehand use query query parameter. might good way split script smaller pieces make structured. might noticed use * value TID variable. can use star alternative writing text values variable. run problems, try set parse_dst_tid parameter FALSE datasets non-standard date formats. Don’t hesitate submit issue question github ’ll try help much can.","code":"aulaar <- dst_get_data(table = \"AULAAR\", KØN = \"Total\", PERPCT = \"Per cent of the labour force\", Tid = 2013,                        lang = \"en\") str(aulaar) ## 'data.frame':    1 obs. of  4 variables: ##  $ KØN   : chr \"Total\" ##  $ PERPCT: chr \"Per cent of the labour force\" ##  $ TID   : POSIXct, format: \"2013-01-01\" ##  $ value : num 4.4 folk1_meta <- dst_meta(\"folk1\", lang = \"da\")  str(dst_get_data(table = \"folk1\",               OMRÅDE = c(\"Hele landet\", \"København\", \"Frederiksberg\", \"Odense\"),               STATSB = \"Danmark\",               TID = \"*\",               lang = \"da\",               meta_data = folk1_meta)) ## 'data.frame':    124 obs. of  4 variables: ##  $ OMRÅDE: chr  \"Hele landet\" \"Hele landet\" \"Hele landet\" \"Hele landet\" ... ##  $ STATSB: chr  \"Danmark\" \"Danmark\" \"Danmark\" \"Danmark\" ... ##  $ TID   : POSIXct, format: \"2008-01-01\" \"2008-04-01\" ... ##  $ value : int  5177301 5180007 5185500 5190271 5191263 5192575 5198180 5202378 5204798 5205473 ... my_query <- list(OMRÅDE = c(\"Hele landet\", \"København\", \"Frederiksberg\", \"Odense\"),                  STATSB = \"Danmark\",                  TID = \"*\")  str(dst_get_data(table = \"folk1\", query = my_query, lang = \"da\")) ## 'data.frame':    124 obs. of  4 variables: ##  $ OMRÅDE: chr  \"Hele landet\" \"Hele landet\" \"Hele landet\" \"Hele landet\" ... ##  $ STATSB: chr  \"Danmark\" \"Danmark\" \"Danmark\" \"Danmark\" ... ##  $ TID   : POSIXct, format: \"2008-01-01\" \"2008-04-01\" ... ##  $ value : int  5177301 5180007 5185500 5190271 5191263 5192575 5198180 5202378 5204798 5205473 ... str(dst_get_data(table = \"AUP01\", OMRÅDE = c(\"Hele landet\"), TID = \"*\", lang = \"da\")) ## 'data.frame':    103 obs. of  3 variables: ##  $ OMRÅDE: chr  \"Hele landet\" \"Hele landet\" \"Hele landet\" \"Hele landet\" ... ##  $ TID   : POSIXct, format: \"2007-01-01\" \"2007-02-01\" ... ##  $ value : num  4.6 4.5 4.3 4 3.7 3.5 3.2 3 3.1 3 ..."},{"path":"https://ropengov.github.io/dkstat/reference/dst_correct_url.html","id":null,"dir":"Reference","previous_headings":"","what":"Corrects url encoding for Danish letters. — dst_correct_url","title":"Corrects url encoding for Danish letters. — dst_correct_url","text":"Corrects url encoding Danish letters.","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_correct_url.html","id":null,"dir":"Reference","previous_headings":"","what":"Usage","title":"Corrects url encoding for Danish letters. — dst_correct_url","text":"","code":"dst_correct_url(url)"},{"path":"https://ropengov.github.io/dkstat/reference/dst_correct_url.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Corrects url encoding for Danish letters. — dst_correct_url","text":"url build url.","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_date_parse.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function to parse the dates from the statbank. — dst_date_parse","title":"Helper function to parse the dates from the statbank. — dst_date_parse","text":"Helper function parse dates statbank.","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_date_parse.html","id":null,"dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function to parse the dates from the statbank. — dst_date_parse","text":"","code":"dst_date_parse(dst_date)"},{"path":"https://ropengov.github.io/dkstat/reference/dst_date_parse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function to parse the dates from the statbank. — dst_date_parse","text":"vector length one date formats like 1982M12D09, 1982M12, 1982Q4 1982","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_find_val_id.html","id":null,"dir":"Reference","previous_headings":"","what":"This is a helper function to extract the ID's in the values list\nthat the dst_meta function returns. — dst_find_val_id","title":"This is a helper function to extract the ID's in the values list\nthat the dst_meta function returns. — dst_find_val_id","text":"helper function extract ID's values list dst_meta function returns.","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_find_val_id.html","id":null,"dir":"Reference","previous_headings":"","what":"Usage","title":"This is a helper function to extract the ID's in the values list\nthat the dst_meta function returns. — dst_find_val_id","text":"","code":"dst_find_val_id(meta_data, variable, values_text = NULL)"},{"path":"https://ropengov.github.io/dkstat/reference/dst_find_val_id.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This is a helper function to extract the ID's in the values list\nthat the dst_meta function returns. — dst_find_val_id","text":"meta_data meta data object. variable variable search . values Character vector. values want extract IDs . NULL, returned value \"*\".","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_get_data.html","id":null,"dir":"Reference","previous_headings":"","what":"This function returns the requested data from the StatBank table.\n(http://www.statistikbanken.dk/statbank5a/ or http://www.dst.dk) — dst_get_data","title":"This function returns the requested data from the StatBank table.\n(http://www.statistikbanken.dk/statbank5a/ or http://www.dst.dk) — dst_get_data","text":"Get data table StatBank.","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_get_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Usage","title":"This function returns the requested data from the StatBank table.\n(http://www.statistikbanken.dk/statbank5a/ or http://www.dst.dk) — dst_get_data","text":"","code":"dst_get_data(table, ..., query = NULL, parse_dst_tid = TRUE, lang = \"da\",   meta_data = NULL, format = \"CSV\", value_presentation = \"Value\")"},{"path":"https://ropengov.github.io/dkstat/reference/dst_get_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This function returns the requested data from the StatBank table.\n(http://www.statistikbanken.dk/statbank5a/ or http://www.dst.dk) — dst_get_data","text":"table Table StatBank. ... Build query. query list object query. parse_dst_tid Logical. Default TRUE. date first day period time zone \"UTC\" Danish \"CET\". lang language. \"en\" english \"da\" danish. meta_data Meta data table. NULL meta data requested. format character value. \"CSV\" \"BULK\". choose BULK need select value parameters. value_presentation now, \"value\" \"default\"","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_get_tables.html","id":null,"dir":"Reference","previous_headings":"","what":"This functions downloads all the available tables. — dst_get_tables","title":"This functions downloads all the available tables. — dst_get_tables","text":"functions downloads available tables.","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_get_tables.html","id":null,"dir":"Reference","previous_headings":"","what":"Usage","title":"This functions downloads all the available tables. — dst_get_tables","text":"","code":"dst_get_tables(lang = \"da\")"},{"path":"https://ropengov.github.io/dkstat/reference/dst_get_tables.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This functions downloads all the available tables. — dst_get_tables","text":"lang \"da\" (danish) \"en\" (english)","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_meta.html","id":null,"dir":"Reference","previous_headings":"","what":"This function returns meta data for a table from StatBank Denmark / Statistics Denmark.\n(http://www.statistikbanken.dk/statbank5a/ or http://www.dst.dk) — dst_meta","title":"This function returns meta data for a table from StatBank Denmark / Statistics Denmark.\n(http://www.statistikbanken.dk/statbank5a/ or http://www.dst.dk) — dst_meta","text":"function POSTs request meta data table Statistics Denmark returns JSON object information.","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_meta.html","id":null,"dir":"Reference","previous_headings":"","what":"Usage","title":"This function returns meta data for a table from StatBank Denmark / Statistics Denmark.\n(http://www.statistikbanken.dk/statbank5a/ or http://www.dst.dk) — dst_meta","text":"","code":"dst_meta(table, ..., lang = \"da\")"},{"path":"https://ropengov.github.io/dkstat/reference/dst_meta.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This function returns meta data for a table from StatBank Denmark / Statistics Denmark.\n(http://www.statistikbanken.dk/statbank5a/ or http://www.dst.dk) — dst_meta","text":"table name table want meta data . ... Ignored. lang can choose \"en\" english \"da\" danish.","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_meta_parse.html","id":null,"dir":"Reference","previous_headings":"","what":"This function parses the JSON from the StatBank.\n(http://www.statistikbanken.dk/statbank5a/ or http://www.dst.dk) — dst_meta_parse","title":"This function parses the JSON from the StatBank.\n(http://www.statistikbanken.dk/statbank5a/ or http://www.dst.dk) — dst_meta_parse","text":"function structures JSON data bit creates basic_query. tables large, basic request rather simple. function returns list basic data, info available variables list basic request.","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_meta_parse.html","id":null,"dir":"Reference","previous_headings":"","what":"Usage","title":"This function parses the JSON from the StatBank.\n(http://www.statistikbanken.dk/statbank5a/ or http://www.dst.dk) — dst_meta_parse","text":"","code":"dst_meta_parse(meta, lang)"},{"path":"https://ropengov.github.io/dkstat/reference/dst_meta_parse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This function parses the JSON from the StatBank.\n(http://www.statistikbanken.dk/statbank5a/ or http://www.dst.dk) — dst_meta_parse","text":"meta returned meta data function meta_dst. lang language orignal dst_meta function (due error API)","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_query_match.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper function to return ids based on text values — dst_query_match","title":"Helper function to return ids based on text values — dst_query_match","text":"helper function return ids based text values.","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_query_match.html","id":null,"dir":"Reference","previous_headings":"","what":"Usage","title":"Helper function to return ids based on text values — dst_query_match","text":"","code":"dst_query_match(table, lang, meta_data, query, format)"},{"path":"https://ropengov.github.io/dkstat/reference/dst_query_match.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Helper function to return ids based on text values — dst_query_match","text":"table Table StatBank. lang language. \"en\" english \"da\" danish.","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_search.html","id":null,"dir":"Reference","previous_headings":"","what":"This function provides a search function for the description field of available \ndata series — dst_search","title":"This function provides a search function for the description field of available \ndata series — dst_search","text":"function provides search function description field available  data series","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_search.html","id":null,"dir":"Reference","previous_headings":"","what":"Usage","title":"This function provides a search function for the description field of available \ndata series — dst_search","text":"","code":"dst_search(string = \"gpd\", field = \"text\", lang = \"da\",   use_cache = NULL)"},{"path":"https://ropengov.github.io/dkstat/reference/dst_search.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This function provides a search function for the description field of available \ndata series — dst_search","text":"string Character string. Speficies search term. field Character string. lang Character. \"da\" danish \"en\" english. use_cache logical scalar. function call Statbank use (possibly outdated) saved version tables?","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_value_limit.html","id":null,"dir":"Reference","previous_headings":"","what":"This is a helper function that returns the number\nof values the call will return.\nThe API has a limit of 100.000 values. — dst_value_limit","title":"This is a helper function that returns the number\nof values the call will return.\nThe API has a limit of 100.000 values. — dst_value_limit","text":"helper function returns number values call return. API limit 100.000 values.","code":""},{"path":"https://ropengov.github.io/dkstat/reference/dst_value_limit.html","id":null,"dir":"Reference","previous_headings":"","what":"Usage","title":"This is a helper function that returns the number\nof values the call will return.\nThe API has a limit of 100.000 values. — dst_value_limit","text":"","code":"dst_value_limit(query, dst_meta)"}]
