<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>API connection to the StatBank from Statistics Denmark • dkstat</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="katex-auto.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><link href="deps/KaTex-0.16.10/katex.min.css" rel="stylesheet">
<script src="deps/KaTex-0.16.10/katex.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="API connection to the StatBank from Statistics Denmark">
<meta name="description" content="This package provides a few simple functions that can be used to query the StatBank from Statistics Denmark.">
<meta property="og:description" content="This package provides a few simple functions that can be used to query the StatBank from Statistics Denmark.">
<meta property="og:image" content="https://ropengov.github.io/dkstat/logo.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@rOpenGov">
<meta name="twitter:site" content="@rOpenGov">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=B612+Mono:ital,wght@0,400;0,700;1,400;1,700&amp;family=Roboto+Mono:ital,wght@0,100..700;1,100..700&amp;display=swap" rel="stylesheet">
<!-- rogtemplate style sheet --><link href="BS5/rogtemplate.min.css" rel="stylesheet">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">dkstat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.09</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rOpenGov/dkstat/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="statistics-denmark-statbank-api-connection">Statistics Denmark StatBank API connection<a class="anchor" aria-label="anchor" href="#statistics-denmark-statbank-api-connection"></a>
</h1>
</div>
</div>
<div class="section level1">
<h1 id="dkstat-">dkstat 
<a class="anchor" aria-label="anchor" href="#dkstat-"></a>
</h1>
<!-- badges: start -->

<p>This package connects to the <a href="http://www.statistikbanken.dk/statbank5a/" class="external-link">StatBank</a> API from <a href="http://www.dst.dk" class="external-link">Statistics Denmark</a>.</p>
<p>This package is in early <em>BETA</em> and new changes will most likely not have backward compatibility.</p>
<div class="section level3">
<h3 id="a-short-message-in-danish">A short message in Danish<a class="anchor" aria-label="anchor" href="#a-short-message-in-danish"></a>
</h3>
<p>Denne R Statistics pakke indeholder funktioner til at give dig adgang til data gennem API’en fra Danmarks Statistik. Funktionerne henter data fra Statistikbanken og retunerer data.frame objekter med værdierne du spørger efter i dit funktionskald.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can only install the development version from github, using Hadley Wickham’s <a href="http://cran.r-project.org/web/packages/devtools/index.html" class="external-link">devtools</a> package:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">"devtools"</span>)) <span class="fu">install.packages</span>(<span class="st">"devtools"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"devtools"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">install_github</span>(<span class="st">"rOpenGov/dkstat"</span>)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>The default language is danish, but have got a lang parameter that you can change from “da” to “en” if you wan’t the data returned in English.</p>
<div class="section level3">
<h3 id="four-basic-function">Four basic function<a class="anchor" aria-label="anchor" href="#four-basic-function"></a>
</h3>
<p>There are four basic functions to learn:</p>
<ul>
<li>dst_search() This function makes it possible to search through the different tables for a word or a phrase.</li>
<li>dst_tables() This function downloads all the possible tables available.</li>
<li>dst_meta() This function lets you download the meta data for a specific table, so you can see the description, unit, variables and values you can download data for.<br>
</li>
<li>dst_get_data() lets you download the actual data you wan’t.</li>
</ul>
<p>Here are a few simple examples that will go through the basics of requesting data from the StatBank and the structure of the output.</p>
<p>First, we’ll load the package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ropengov.github.io/dkstat/">dkstat</a></span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="the-search-function">The search function<a class="anchor" aria-label="anchor" href="#the-search-function"></a>
</h2>
<p>The search function let’s you.. OK, you might know this already.</p>
<p>Here I search for gdp in the text field of the tables.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/dst_search.html">dst_search</a></span><span class="op">(</span>string <span class="op">=</span> <span class="st">"bnp"</span>, field <span class="op">=</span> <span class="st">"text"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="do">##          id</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="do">## 584    NAN1</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="do">## 588    NKN1</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="do">## 593   NAHL2</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="do">## 596   NKHO2</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="do">## 599   NAHO2</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="do">## 602  NAHD21</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="do">## 669    NRHP</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="do">## 670   VNRHP</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="do">## 1318 CFABNP</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="do">##                                                                                   text</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="do">## 584  Forsyningsbalance, bruttonationalprodukt (BNP),økonomisk vækst, beskæftigelse mv.</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="do">## 588                  Forsyningsbalance, Bruttonationalprodukt (BNP), beskæftigelse mv.</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="do">## 593                          1-2.1.1 Produktion, BNP og indkomstdannelse (hovedposter)</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="do">## 596                                        1-2.1.1 Produktion, BNP og indkomstdannelse</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="do">## 599                             1-2.1.1 Produktion, BNP og indkomstdannelse (oversigt)</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="do">## 602                                                   1 Produktion og BNP (detaljeret)</span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a><span class="do">## 669                                        1-2.1.1 Produktion, BNP og indkomstdannelse</span></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a><span class="do">## 670                           Versionstabel NRHP - Produktion, BNP og indkomstdannelse</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a><span class="do">## 1318                                                        FoU udgifter i pct. af BNP</span></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a><span class="do">##             unit             updated firstPeriod latestPeriod active</span></span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a><span class="do">## 584            - 2024-10-03T08:00:00        1966         2023   TRUE</span></span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a><span class="do">## 588            - 2024-11-20T08:00:00      1990K1       2024K3   TRUE</span></span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a><span class="do">## 593     Mio. kr. 2024-06-28T08:00:00        1966         2023   TRUE</span></span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a><span class="do">## 596     Mio. kr. 2024-11-20T08:00:00      1990K1       2024K3   TRUE</span></span>
<span id="cb4-26"><a href="#cb4-26" tabindex="-1"></a><span class="do">## 599     Mio. kr. 2024-06-28T08:00:00        1995         2023   TRUE</span></span>
<span id="cb4-27"><a href="#cb4-27" tabindex="-1"></a><span class="do">## 602     Mio. kr. 2024-06-28T08:00:00        1995         2023   TRUE</span></span>
<span id="cb4-28"><a href="#cb4-28" tabindex="-1"></a><span class="do">## 669            - 2024-10-28T08:00:00        1993         2023   TRUE</span></span>
<span id="cb4-29"><a href="#cb4-29" tabindex="-1"></a><span class="do">## 670            - 2024-10-28T08:00:00        1993         2023   TRUE</span></span>
<span id="cb4-30"><a href="#cb4-30" tabindex="-1"></a><span class="do">## 1318 Pct. af bnp 2023-12-14T08:00:00        1997         2022   TRUE</span></span>
<span id="cb4-31"><a href="#cb4-31" tabindex="-1"></a><span class="do">##                                          variables</span></span>
<span id="cb4-32"><a href="#cb4-32" tabindex="-1"></a><span class="do">## 584                    transaktion, prisenhed, tid</span></span>
<span id="cb4-33"><a href="#cb4-33" tabindex="-1"></a><span class="do">## 588  transaktion, prisenhed, sæsonkorrigering, tid</span></span>
<span id="cb4-34"><a href="#cb4-34" tabindex="-1"></a><span class="do">## 593                    transaktion, prisenhed, tid</span></span>
<span id="cb4-35"><a href="#cb4-35" tabindex="-1"></a><span class="do">## 596  transaktion, prisenhed, sæsonkorrigering, tid</span></span>
<span id="cb4-36"><a href="#cb4-36" tabindex="-1"></a><span class="do">## 599                    transaktion, prisenhed, tid</span></span>
<span id="cb4-37"><a href="#cb4-37" tabindex="-1"></a><span class="do">## 602                    transaktion, prisenhed, tid</span></span>
<span id="cb4-38"><a href="#cb4-38" tabindex="-1"></a><span class="do">## 669            område, transaktion, prisenhed, tid</span></span>
<span id="cb4-39"><a href="#cb4-39" tabindex="-1"></a><span class="do">## 670   version, område, transaktion, prisenhed, tid</span></span>
<span id="cb4-40"><a href="#cb4-40" tabindex="-1"></a><span class="do">## 1318                               pct af BNP, tid</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="download-the-tables">Download the tables<a class="anchor" aria-label="anchor" href="#download-the-tables"></a>
</h2>
<p>The dst_get_tables function downloads all the available tables that the search function use when searching for a word or a phrase.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="reference/dst_get_tables.html">dst_get_tables</a></span><span class="op">(</span>lang <span class="op">=</span> <span class="st">"da"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="do">##         id                            text  unit             updated</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="do">## 1   FOLK1A Befolkningen den 1. i kvartalet Antal 2024-11-11T08:00:00</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="do">## 2  FOLK1AM   Befolkningen den 1. i måneden Antal 2024-11-11T08:00:00</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="do">## 3  BEFOLK1          Befolkningen 1. januar Antal 2024-02-12T08:00:00</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="do">## 4  BEFOLK2          Befolkningen 1. januar Antal 2024-02-12T08:00:00</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="do">## 5    FOLK3          Befolkningen 1. januar Antal 2024-02-12T08:00:00</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="do">## 6 FOLK3FOD          Befolkningen 1. januar Antal 2024-02-12T08:00:00</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="do">##   firstPeriod latestPeriod active                             variables</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="do">## 1      2008K1       2024K4   TRUE       område,køn,alder,civilstand,tid</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="do">## 2     2021M10      2024M10   TRUE                  område,køn,alder,tid</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="do">## 3        1971         2024   TRUE              køn,alder,civilstand,tid</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="do">## 4        1901         2024   TRUE                         køn,alder,tid</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="do">## 5        2008         2024   TRUE fødselsdag,fødselsmåned,fødselsår,tid</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="do">## 6        2008         2024   TRUE  fødselsdag,fødselsmåned,fødeland,tid</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="meta-data">Meta data<a class="anchor" aria-label="anchor" href="#meta-data"></a>
</h2>
<p>The dst_meta function retrieves meta data from the table you wan’t to take a closer look at. It can be used to create the final request, but if you can figure out the structure of the query you can define it yourself.</p>
<p>We’ll get some meta data from the <a href="http://www.statistikbanken.dk/AULAAR" class="external-link">AULAAR table</a>. The AULAAR table has net unemployment numbers.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aulaar_meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/dst_meta.html">dst_meta</a></span><span class="op">(</span>table <span class="op">=</span> <span class="st">"AULAAR"</span>, lang <span class="op">=</span> <span class="st">"da"</span><span class="op">)</span></span></code></pre></div>
<p>The ‘dst_meta’ function returns a list with 4 objects: - basics - variables - values - basic_query</p>
<div class="section level3">
<h3 id="basics">Basics<a class="anchor" aria-label="anchor" href="#basics"></a>
</h3>
<p>Let’s see what the basics contains:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aulaar_meta</span><span class="op">$</span><span class="va">basics</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="do">## $id</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="do">## [1] "AULAAR"</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="do">## $text</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="do">## [1] "Fuldtidsledige (netto)"</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="do">## $description</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="do">## [1] "Fuldtidsledige (netto) efter køn, personer/pct. og tid"</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="do">## $unit</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="do">## [1] "Antal"</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="do">## $updated</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="do">## [1] "2024-04-16T08:00:00"</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a><span class="do">## $footnote</span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a><span class="do">## NULL</span></span></code></pre></div>
<p>There’s a table id, a short description, a unit description and when the table was updated.</p>
</div>
<div class="section level3">
<h3 id="variables">Variables<a class="anchor" aria-label="anchor" href="#variables"></a>
</h3>
<p>The variables in the list has a short description of each variable as well as the id. You might want to make sure that you have supplied all the ID’s where the elimination columns is equal to FALSE. The IDs where eliminnation is equal FALSE are mandatory.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aulaar_meta</span><span class="op">$</span><span class="va">variables</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="do">##       id          text elimination</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="do">## 1    KØN           køn        TRUE</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="do">## 2 PERPCT personer/pct.       FALSE</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="do">## 3    Tid           tid       FALSE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="values">Values<a class="anchor" aria-label="anchor" href="#values"></a>
</h3>
<p>The values is a list object of all the values in each variable. You use the text column to construct your final query:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">aulaar_meta</span><span class="op">$</span><span class="va">values</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="do">## List of 3</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="do">##  $ KØN   :'data.frame':  3 obs. of  2 variables:</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="do">##   ..$ id  : chr [1:3] "TOT" "M" "K"</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="do">##   ..$ text: chr [1:3] "I alt" "Mænd" "Kvinder"</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="do">##  $ PERPCT:'data.frame':  2 obs. of  2 variables:</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="do">##   ..$ id  : chr [1:2] "L10" "L9"</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="do">##   ..$ text: chr [1:2] "Procent af arbejdsstyrken" "Ledige (1000 personer)"</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="do">##  $ Tid   :'data.frame':  45 obs. of  2 variables:</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="do">##   ..$ id  : chr [1:45] "1979" "1980" "1981" "1982" ...</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="do">##   ..$ text: chr [1:45] "1979" "1980" "1981" "1982" ...</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="get-data">Get data<a class="anchor" aria-label="anchor" href="#get-data"></a>
</h2>
<p>You need to build your query based on the text column that each variable contains in the meta_data$values list.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aulaar</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/dst_get_data.html">dst_get_data</a></span><span class="op">(</span></span>
<span>  table <span class="op">=</span> <span class="st">"AULAAR"</span>, KØN <span class="op">=</span> <span class="st">"Total"</span>, PERPCT <span class="op">=</span> <span class="st">"Per cent of the labour force"</span>, Tid <span class="op">=</span> <span class="fl">2013</span>,</span>
<span>  lang <span class="op">=</span> <span class="st">"en"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">aulaar</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="do">## 'data.frame':    1 obs. of  4 variables:</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="do">##  $ KØN   : chr "Total"</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="do">##  $ PERPCT: chr "Per cent of the labour force"</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="do">##  $ TID   : POSIXct, format: "2013-01-01"</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="do">##  $ value : num 4.4</span></span></code></pre></div>
<p>In the request above I don’t supply the meta_data to the dst_get_data function, but this is possible as I will show below. It’s a good idea to supply the meta data to the dst_get_data function if you query the table more than once. If you don’t supply the meta data the dst_get_data function will request the meta data for the table and this will be very ineffecient.</p>
<p>Let’s query the statbank using more than one value for each variable.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">folk1a_meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/dst_meta.html">dst_meta</a></span><span class="op">(</span><span class="st">"folk1a"</span>, lang <span class="op">=</span> <span class="st">"da"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="reference/dst_get_data.html">dst_get_data</a></span><span class="op">(</span></span>
<span>  table <span class="op">=</span> <span class="st">"folk1a"</span>,</span>
<span>  Tid <span class="op">=</span> <span class="st">"*"</span>,</span>
<span>  CIVILSTAND <span class="op">=</span> <span class="st">"*"</span>,</span>
<span>  ALDER <span class="op">=</span> <span class="st">"*"</span>,</span>
<span>  OMRÅDE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Hele landet"</span>, <span class="st">"København"</span>, <span class="st">"Dragør"</span>, <span class="st">"Albertslund"</span><span class="op">)</span>,</span>
<span>  lang <span class="op">=</span> <span class="st">"da"</span>,</span>
<span>  meta_data <span class="op">=</span> <span class="va">folk1a_meta</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="do">## 'data.frame':    172720 obs. of  5 variables:</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="do">##  $ TID       : POSIXct, format: "2008-01-01" "2008-01-01" ...</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="do">##  $ CIVILSTAND: chr  "I alt" "I alt" "I alt" "I alt" ...</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="do">##  $ ALDER     : chr  "Alder i alt" "Alder i alt" "Alder i alt" "Alder i alt" ...</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="do">##  $ OMRÅDE    : chr  "Hele landet" "København" "Dragør" "Albertslund" ...</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="do">##  $ value     : int  5475791 509861 13261 27602 64412 7986 121 295 65722 7097 ...</span></span></code></pre></div>
<p>I can also build a query beforehand and then use the query in the query parameter. This might be a good way to split your script up into smaller pieces and make it more structured.</p>
<p>You might have noticed that I use the * as a value in the TID variable. You can use the star as a alternative to writing all the text values for the variable.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  OMRÅDE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Hele landet"</span>, <span class="st">"København"</span>, <span class="st">"Frederiksberg"</span>, <span class="st">"Odense"</span><span class="op">)</span>,</span>
<span>  CIVILSTAND <span class="op">=</span> <span class="st">"Ugift"</span>,</span>
<span>  TID <span class="op">=</span> <span class="st">"*"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="reference/dst_get_data.html">dst_get_data</a></span><span class="op">(</span>table <span class="op">=</span> <span class="st">"folk1a"</span>, query <span class="op">=</span> <span class="va">my_query</span>, lang <span class="op">=</span> <span class="st">"da"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="do">## 'data.frame':    272 obs. of  4 variables:</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="do">##  $ OMRÅDE    : chr  "Hele landet" "Hele landet" "Hele landet" "Hele landet" ...</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="do">##  $ CIVILSTAND: chr  "Ugift" "Ugift" "Ugift" "Ugift" ...</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="do">##  $ TID       : POSIXct, format: "2008-01-01" "2008-04-01" ...</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="do">##  $ value     : int  2552700 2563134 2564705 2568255 2575185 2584993 2584560 2588198 2593172 2604129 ...</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="reference/dst_get_data.html">dst_get_data</a></span><span class="op">(</span>table <span class="op">=</span> <span class="st">"AUP01"</span>, OMRÅDE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Hele landet"</span><span class="op">)</span>, TID <span class="op">=</span> <span class="st">"*"</span>, lang <span class="op">=</span> <span class="st">"da"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="do">## 'data.frame':    87 obs. of  3 variables:</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="do">##  $ OMRÅDE: chr  "Hele landet" "Hele landet" "Hele landet" "Hele landet" ...</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="do">##  $ TID   : POSIXct, format: "2017-07-01" "2017-08-01" ...</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="do">##  $ value : num  4 4.1 3.9 4 4 4.1 4.2 4.2 4.1 3.7 ...</span></span></code></pre></div>
<p>If you run into problems, then try to set the parse_dst_tid parameter to FALSE as there are few datasets with non-standard date formats.</p>
<p>Don’t hesitate to submit an issue or question on github and I’ll try to help as much as I can.</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/rOpenGov/dkstat/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/rOpenGov/dkstat/issues" class="external-link">Report a bug</a></li>
<li><a href="https://ropengov.org/" class="external-link">Part of <img src="https://raw.githubusercontent.com/rOpenGov/homepage/master/static/images/logo2020_black_orange.svg" height="20" class="d-inline-block mx-1 rog-logo"></a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-2" class="external-link">GPL-2</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing dkstat</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://aleksanderbl.dk" class="external-link">Aleksander Bang-Larsen</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0009-0007-7984-4650" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Kenneth Rose <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="http://ropengov.org/" class="external-link"><img src="https://ropengov.github.io/rogtemplate/reference/figures/ropengov-badge.svg" alt="rOG-badge"></a></li>
<li><a href="https://app.codecov.io/gh/ropengov/dkstat" class="external-link"><img src="https://codecov.io/gh/ropengov/dkstat/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/rOpenGov/dkstat/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/rOpenGov/dkstat/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://aleksanderbl.dk" class="external-link">Aleksander Bang-Larsen</a>, Kenneth Rose.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>



    <!-- Add ropengov logo -->
  <script src="BS5/logo.js"></script>
</body>
</html>
